https 缓存 主要针对css js 图片等更新频率不大的静态文件

HTTP 缓存请求响应头

1. cache-control
   no-store: 任何内容都不缓存
   no-cahce: 字面意思是不缓存 **但是实际会缓存** 不过使用缓存前 不论本地缓存是否过期都会先请求服务器进行验证查看缓存的内容是否依旧有效
   max-age  最大有效期（s）
   s-maxage  首先只对CDN 有效，意思是请求 s-maxage 秒内不再发请求
   public 客户端 服务器端 CDN 端都可以缓存
   private 只有客户端可以缓存
   must-revalidate：告诉浏览器、缓存服务器，本地副本过期前，可以使用本地副本；本地副本一旦过期，必须去源服务器进行有效性校验。

2. HTTP 1.0 中有一个过期时间的设置 Expires  在http1.1中 max-age优先级比Expires高

3. 响应头Last-Modified 最后一次修改时间  服务器告诉浏览器

4. 请求头if-Modified-Since 最后一次修改时间 浏览器告诉服务器

    if-Modified-since 和 last-modified 相同 会返回304 状态码 就会使用本地缓存

5.Etag 响应头 资源标识

5. if-none-match 请求头 缓存资源标识  和Etag一对 会进行对比

   if-none-match 如果和 ETag相等 说明文件依旧没有被修改过，返回304  继续使用本地缓存


来！ 模拟一个二逼请求吧。

浏览器： 你好 服务哥 我来要一张 不可描述.png
服务器: 好的小老弟, 这是 不可描述.png，

A few ms later...

浏览器： 你好 服务哥 我来要刚才那一张 不可描述.png
服务器:  你这个B好烦啊！ 这是 不可描述.png，送你个过期时间（Expires 或者 max-age), 时间到之前不要来打扰老子！
浏览器:  好的大哥！

Expires 或者 max-age过期了

浏览器：大哥我又来了 时间到了 不可描述.png再来一张啊~
服务器：好的小老弟 给你 不可描述.png，再给你个过期时间（Expires 或者 max-age)，最后送你个牛逼的东西 last-modify,如果到期了咱俩比比最后修改时间，如果一样就别烦我
浏览器：好的大哥

***这时有一个极端的情况 因为Expires max-age， last-modify if-modify-since,都是精确到s的， 如果last-modify给浏览器的时间是11:19:20:1000(11点19份20秒1000毫秒) 完事突然这个静态资源又
被修改了 修改时间是11:19:20:1001(11点19份20秒1001毫秒)  但是一方面刚才已经传给浏览器 11点19份20秒1000毫秒 精确到秒就是 11点19份20秒 但是 11点19份20秒1001毫秒时服务器上的内容被
修改了 但是精确到秒依旧是11点19份20秒。 如果浏览器再次请求 发现if-modify-since 和 服务器的 last-modify 时间一样 这时依旧会使用本地缓存 而不是服务器返回的新内容，会导致内容更新不
及时。***

再来模拟一下那个二逼请求：

浏览器： 服务哥 还是 不可描述.png， if-modify-since 和 last-modify极端情况下的bug怎么解决啊
服务器： 大哥有办法 给你个不可描述.png + 过期时间 再给你个Etag 资源标识符 这东西比last-modify优先级高一些
浏览器： 好的大哥

等再次请求的时候 浏览器发送给后台的请求头中就会包含资源的if-none-match，来检查对应资源的Etag 如果一样 返回304 继续使用本地的 否则重新拉取远程资源并使用


缓存方法：md5缓存 或者 hash 缓存
这些缓存方法在前端的打包工具中已经被使用了。不再多说~


关于应用缓存 ：manifest 了解不多 大概会用但是没用过。。。 百度方法也不少。。。









